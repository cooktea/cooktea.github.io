---
title: 家庭监控系统搭建（折腾）
date: 2022-07-01
categories:
- Learning Something
---
# 前言
2022年3月的一个周末，笔者在上海穿着棉袄跟好友在深夜的街头撸着烧烤。万万没想到的是这竟然是未来三个月内笔者吃到的最后一顿烧烤。居家办公的日子总是在摸鱼与爆肝之间反复交替，恰逢给老家安装监控这件事早已有所计划，索性便用摸鱼的时间将其落地。
# 为什么要装监控
## 正经的的理由
1. 最近村子里修了柏油马路，村后的河堤也修成了永久性的水泥堤坝并同上了路。最近经常有很多陌生面孔从村子里经过，加之70多岁的奶奶在半封闭的院子里种了玉米，为了不让玉米被晨练或遛狗的路人顺手牵羊，需要安装几个监控聊以自慰。（虽然整套监控装下来的费用够买一吨玉米了
2. 住在一起乐于捕鱼的叔叔晒在院子里的渔网最近总是莫名失窃，怀疑是村子里有不对付的人家故意破坏，让我装个监控以便坐实证据。
3. 老爹常年在外面工作，对家里的情况放心不下。装个监控也好一定程度上缓解下这个中年男人的思乡情切。
## 不那么正经的理由
1. 生命在于折腾，还有什么比亲手装一套监控更有成就感呢。顺便点下技能树，万一以后失业了说不定还能靠这个混口饭吃。
2. FFmpeg的书买回来一年了塑料封皮都还没拆，借着装监控的机会倒逼自己把FFmpeg的技能点一下。
3. 终于有理由采购心心念念的二手洋垃圾服务器和交换机了。（这个才是重点  

# 假装有需求分析
考虑到奶奶的苞米地，叔叔的渔网以及老爹的思乡情，再考虑下上述三个人加起来都不一定能分得清鼠标左右键，最终决定在常规的监控系统下，一定要有一套机制能够让上述几人在手机上可以进行监控的查看及录像回放等功能。  
主要需求如下：  
1. 监控范围能覆盖家里和外界联通的几个门以及奶奶的苞米地和叔叔晒渔网的地方
2. 能在手机上查看实时监控以及录像
3. 没了  

# 需要买些啥
俗话说巧妇难为无米之炊，没有硬件设备就是大罗神仙下凡也搞不定搭监控这件事。所以采购必须的设备及辅材就成了关键，由于笔者的所有社会关系总和内都跟安装监控这件事扯不上关系，（说人话就是没熟人。所以需要从头了解监控系统的组成，经过一番努力，总算了解了一个大概。  
监控系统是以NVR为中心，通过交换机管理IP摄像头并获取视频流。之后NVR将视频流进行滚动存储，以实现录像的功能。听起来感觉很简单的样子，所以这就先去买个NVR。  
等等，我都自己装监控了，直接买NVR也太简单了吧。这不是有手就行？而且市场上的NVR主要有海康威视和大华等，如果要实现手机上就能操作，还需要额外付费购买这些公司的云产品。作为一个给小姐姐之家（百度云）开会员都扣扣索索的男人怎么可能会因为这种事情就掏出我的钱包。打咩！！！  
经过一番调查，最终还是GayHub yyds。对比了多款开源NVR之后，笔者最终还是在ISpy，shinobi，Zoneminder中选择了ZoneMinder作为整套监控系统的核心。之所以选择ZoneMinder是因为其可以作为独立的服务部署在linux系统上，并通过web进行管理和使用。同时很重要的一点是，Zoneminder有社区支持的移动端APP，对于家里的中老年人来说十分友好。  
最重要的NVR搞定之后，剩下来就是一些比较“常见”的设备了。具体的设备清单及费用在下面了。  

| 设备名 | 参数 | 数量 | 价格 | 备注 |
| --- | --- | --- | --- | --- |
| 服务器| 华为RH2288HV2 | 1 | 1000 | 捡垃圾 |
| 内存 | 8G | 4 | 220 | 捡垃圾 |
| CPU | E52650V2 | 2 | 80 | 捡垃圾 |
| 硬盘 | 4T | 1 | 280 | 矿盘 |
| 交换机 | 100M | 1 | 80 | |
| 交换机 | 1000M | 1 | 110 | |
| 监控头 | 4mm | 3 | 155 | 二手 |
| 监控头 | 6mm | 1 | 45 | 二手 |
| 监控头 | 12mm | 1 | 65 | 二手 |
| 监控电源 | 12v | 5 | 50 | |
| 监控用室外网线| | 150m | 100 | |
| 监控用电源线| | 150m | 100 | |
